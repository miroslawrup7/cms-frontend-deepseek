import{API_BASE}from"./api.js";import{toast,toastError}from"./toast.js";document.getElementById("registerForm").addEventListener("submit",async e=>{e.preventDefault();const t=document.getElementById("username").value,n=document.getElementById("email").value,o=document.getElementById("password").value,s=document.getElementById("role").value,r=document.getElementById("error"),a=document.getElementById("success"),d=e.target.querySelector('button[type="submit"]');r&&(r.textContent=""),a&&(a.textContent=""),d&&(d.disabled=!0);try{const d=await fetch(`${API_BASE}/api/auth/register-pending`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t,email:n,password:o,role:s})}),m=await d.json();if(!d.ok){const e=m.message||"Błąd rejestracji";return r&&(r.textContent=e),void toastError(e)}const i=m.message||"Wniosek rejestracyjny został przesłany do zatwierdzenia.";a&&(a.textContent=i),toast(i,"success"),e.target.reset()}catch(e){const t="Błąd połączenia z serwerem";r&&(r.textContent=t),toastError(t)}finally{d&&(d.disabled=!1)}});
//# sourceMappingURL=register.js.map
